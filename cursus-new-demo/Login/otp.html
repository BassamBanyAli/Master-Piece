<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, shrink-to-fit=9">
    <meta name="description" content="Gambolthemes">
    <meta name="author" content="Gambolthemes">
    <title>Cursus - Enter OTP</title>

    <!-- Favicon Icon -->
    <link rel="icon" type="image/png" href="../../images/fav.png">

    <!-- Stylesheets -->
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,500' rel='stylesheet'>
    <link href='../vendor/unicons-2.0.1/css/unicons.css' rel='stylesheet'>
    <link href="../css/vertical-responsive-menu.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
    <link href="../css/responsive.css" rel="stylesheet">
    <link href="../css/night-mode.css" rel="stylesheet">

    <!-- Vendor Stylesheets -->
    <link href="../vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link href="../vendor/OwlCarousel/assets/owl.carousel.css" rel="stylesheet">
    <link href="../vendor/OwlCarousel/assets/owl.theme.default.min.css" rel="stylesheet">
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../vendor/bootstrap-select/docs/docs/dist/css/bootstrap-select.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../vendor/semantic/semantic.min.css">
</head>

<body class="sign_in_up_bg">
    <!-- OTP Input Start -->
    <div class="container">
        <div class="row justify-content-lg-center justify-content-md-center">
            <div class="col-lg-12">
                <div class="main_logo25" id="logo">
                    <a href="../index.html"><img src="../images/logo.svg" alt=""></a>
                    <a href="../index.html"><img class="logo-inverse" src="../images/ct_logo.svg" alt=""></a>
                </div>
            </div>

            <div class="col-lg-6 col-md-8">
                <div class="sign_form">
                    <h2>Enter OTP</h2>
                    <p class="mb-4">Please enter the OTP sent to your registered email address.</p>
                    <form id="form1" onsubmit="getotp(event)">
                        <div class="ui search focus mt-50">
                            <div class="ui left icon input swdh95">
                                <input class="prompt srch_explore" type="text" name="otp" id="otp" required maxlength="6" placeholder="Enter OTP">
                                <i class="uil uil-key-skeleton icon icon2"></i>
                            </div>
                        </div>
                        <button class="login-btn" type="submit">Verify OTP</button>
                    </form>
                    <p class="mb-0 mt-30">Didn't receive the code? <a href="#" onclick="resendOtp()">Resend OTP</a></p>
                </div>
                <div class="sign_footer"><img src="../images/sign_logo.png" alt="">Â© 2024 <strong>Cursus</strong>. All Rights Reserved.</div>
            </div>
        </div>
    </div>
    <!-- OTP Input End -->

    <script src="../js/jquery-3.7.1.min.js"></script>
    <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../vendor/OwlCarousel/owl.carousel.js"></script>
    <script src="../vendor/bootstrap-select/docs/docs/dist/js/bootstrap-select.js"></script>
    <script src="../vendor/semantic/semantic.min.js"></script>
    <script src="../js/custom.js"></script>
    <script src="../js/night-mode.js"></script>
    <script src="forgot_password.js"></script>
    <script src="otp.js"></script>

    <script>
        function verifyOtp(event) {
            event.preventDefault();
            const otp = document.getElementById('otp').value;

            // Add your OTP verification logic here
            alert('OTP has been verified successfully.');
        }

         async function resendOtp() {
            debugger;
            var url = 'https://localhost:7246/api/Users/send';


            var formData = new FormData();
var email = localStorage.getItem("email");

// Append the email to formData with a key, e.g., "email"
formData.append("ToEmail", email);
try {

    var response = await fetch(url, {
        method: "POST", 
        body: formData 
    });


    if (response.ok) {
        var result = await response.json();
    } else {
        throw new Error("Failed to send verification email.");
    }
} catch (error) {
    console.error("Error:", error);
    alert("Error sending email: " + error.message);
}
            alert('A new OTP has been sent to your email.');
}
    </script>

</body>

</html>
    